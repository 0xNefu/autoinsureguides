---
// src/pages/index.astro - AUTO INSURANCE VERSION
import { getCollection } from 'astro:content';
import Base from "@/layouts/Base.astro";
import Posts from "@/layouts/components/Posts.astro";
import Pagination from "@/layouts/components/Pagination.astro";
import { CATEGORY_HIERARCHY } from '@/lib/categories';

// Helper function for automatic readTime calculation
function calculateReadTime(content, wordsPerMinute = 130) {
  if (!content) return 8;
  
  const plainText = content
    .replace(/---[\s\S]*?---/, '')
    .replace(/```[\s\S]*?```/g, '')
    .replace(/<[^>]*>/g, '')
    .replace(/#{1,6}\s*/g, '')
    .replace(/[\[\]\(\)]/g, ' ')
    .replace(/\s+/g, ' ')
    .trim();
  
  const wordCount = plainText.split(/\s+/).length;
  const minutes = Math.ceil(wordCount / wordsPerMinute);
  
  return Math.max(1, Math.min(minutes, 60));
}

function getPostReadTime(post) {
  if (post.data.readTime) return post.data.readTime;
  if (post.body) return calculateReadTime(post.body);
  
  const estimates = {
    'car-insurance-basics': 10,
    'cost-discounts': 12,
    'claims-accidents': 15,
    'drivers-coverage': 12,
    'state-guides': 14,
    'company-reviews': 13,
    'insurance-news': 10,
    'saving-tips': 11
  };
  
  return estimates[post.data.category] || 10;
}

const allPostsRaw = await getCollection('posts', ({ data }) => !data.draft);
const allPosts = allPostsRaw.map(post => ({
  ...post,
  data: {
    ...post.data,
    readTime: getPostReadTime(post)
  }
}));

const sortedPosts = allPosts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);

const featuredPost = sortedPosts[0];
const latestPosts = sortedPosts.slice(1, 8);

const categoryPosts = {};
const categoryPostCounts = {};

Object.keys(CATEGORY_HIERARCHY).forEach(category => {
  const allPostsInCategory = sortedPosts.filter(p => p.data.category === category);
  categoryPostCounts[category] = allPostsInCategory.length;
  categoryPosts[category] = allPostsInCategory
    .filter(p => p.slug !== featuredPost?.slug)
    .slice(0, 3);
});

const beginnerPosts = sortedPosts
  .filter(p => p.data.category === 'car-insurance-basics' && p.slug !== featuredPost?.slug);

let quickWins;
if (beginnerPosts.length >= 4) {
  quickWins = beginnerPosts.slice(0, 4);
} else {
  const otherPosts = sortedPosts
    .filter(p => p.slug !== featuredPost?.slug)
    .slice(0, 4 - beginnerPosts.length);
  quickWins = [...beginnerPosts, ...otherPosts].slice(0, 4);
}

if (!quickWins || quickWins.length === 0) {
  quickWins = sortedPosts.slice(0, 4);
}

const realisticStats = {
  guidesPublished: allPosts.length.toString(),
  monthlyVisitors: "15,000+",
  statesCovered: "50+",
  moneySaved: "$1.2M+"
};
---

<Base title="AutoInsureGuides - Expert Auto Insurance Advice & Money-Saving Tips" 
      description="Get unbiased auto insurance guidance, comparison tools, and savings tips. No commission, just honest advice to help you save money.">
  
  <!-- üöó PROFESSIONAL INSURANCE HERO SECTION -->
  <section class="relative min-h-[85vh] overflow-hidden bg-gradient-to-br from-blue-50 via-white to-gray-50">
    <!-- Professional Background Elements -->
    <div class="absolute inset-0">
      <!-- Subtle insurance-themed patterns -->
      <div class="absolute inset-0 opacity-5">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grid" width="80" height="80" patternUnits="userSpaceOnUse">
              <path d="M 80 0 L 0 0 0 80" fill="none" stroke="currentColor" stroke-width="1"/>
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grid)"/>
        </svg>
      </div>
      
      <!-- Insurance document background texture -->
      <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiPjxyZWN0IHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iI2Y4ZjhmOCIvPjxwYXRoIGQ9Ik0wIDQwTDQwIDBaIiBmaWxsPSJub25lIiBzdHJva2U9IiNlNWU1ZTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PHBhdGggZD0iTTQwIDBMNDAgNDBaIiBmaWxsPSJub25lIiBzdHJva2U9IiNlNWU1ZTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm4pIi8+PC9zdmc+')] opacity-10"></div>
      
      <!-- Hero image overlay -->
      <div class="absolute inset-0">
        <div class="absolute right-0 top-0 bottom-0 w-1/2 lg:w-2/3 bg-gradient-to-l from-blue-500/5 to-transparent"></div>
      </div>
    </div>
    
    <div class="container relative z-10 mx-auto px-4 pt-28 pb-16">
      <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        
        {/* Main Content */}
        <div>
          {/* Trust Badge */}
          <div class="inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm border border-blue-200 rounded-full px-5 py-2.5 mb-8 shadow-sm">
            <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
            <span class="text-blue-700 font-semibold text-sm">
              üèÜ TRUSTED ADVICE ‚Ä¢ NO COMMISSION ‚Ä¢ UNBIASED GUIDES
            </span>
          </div>
        
          {/* Main Headline */}
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-8 leading-tight">
            <span class="text-blue-900">
              Stop Overpaying
            </span>
            <br />
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-600">
              For Auto Insurance
            </span>
          </h1>
        
          {/* Subheadline */}
          <p class="text-xl text-gray-700 mb-10 max-w-2xl">
            Get expert guidance, <span class="font-semibold text-blue-700">unbiased company reviews</span>, and proven strategies to save hundreds on your auto insurance. No sales, just facts.
          </p>
        
          {/* CTA Buttons */}
          <div class="flex flex-col sm:flex-row gap-5 mb-12">
            <a href="#start-saving" 
               class="group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-800 text-white font-bold rounded-xl hover:shadow-2xl hover:shadow-blue-500/40 transition-all duration-300 transform hover:-translate-y-1 text-center text-lg">
              <span class="relative z-10 flex items-center justify-center gap-3">
                üöó GET FREE QUOTE COMPARISON
                <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
              </span>
              <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-blue-600 to-blue-800 blur opacity-50 group-hover:opacity-70 transition-opacity"></div>
            </a>
            <a href="#money-saving-tips" 
               class="px-8 py-4 bg-white/80 backdrop-blur-sm border-2 border-blue-200 text-blue-900 font-bold rounded-xl hover:bg-blue-50 hover:border-blue-300 transition-all duration-300 text-center text-lg">
              üí∞ MONEY-SAVING TIPS
            </a>
          </div>
        
          {/* Trust Indicators */}
          <div class="flex flex-wrap items-center gap-6 text-sm text-gray-600">
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 bg-green-500 rounded-full"></div>
              <span>No commission fees</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 bg-green-500 rounded-full"></div>
              <span>Updated daily</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 bg-green-500 rounded-full"></div>
              <span>50 states covered</span>
            </div>
          </div>
        </div>
        
        {/* Hero Image/Stats Card */}
        <div class="relative">
          <div class="bg-white rounded-2xl shadow-2xl p-8 border border-blue-100">
            {/* Stats Grid */}
            <div class="grid grid-cols-2 gap-6 mb-8">
              <div class="text-center p-4 bg-blue-50 rounded-xl">
                <div class="text-3xl font-bold text-blue-900 mb-2">{realisticStats.monthlyVisitors}</div>
                <div class="text-sm text-blue-700 font-medium">MONTHLY VISITORS</div>
              </div>
              <div class="text-center p-4 bg-cyan-50 rounded-xl">
                <div class="text-3xl font-bold text-cyan-900 mb-2">{realisticStats.statesCovered}</div>
                <div class="text-sm text-cyan-700 font-medium">STATES COVERED</div>
              </div>
              <div class="text-center p-4 bg-green-50 rounded-xl">
                <div class="text-3xl font-bold text-green-900 mb-2">{realisticStats.moneySaved}</div>
                <div class="text-sm text-green-700 font-medium">MONEY SAVED</div>
              </div>
              <div class="text-center p-4 bg-purple-50 rounded-xl">
                <div class="text-3xl font-bold text-purple-900 mb-2">{realisticStats.guidesPublished}</div>
                <div class="text-sm text-purple-700 font-medium">GUIDES</div>
              </div>
            </div>
            
            {/* Calculator Preview */}
            <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-200">
              <h3 class="text-lg font-bold text-blue-900 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
                </svg>
                Quick Savings Estimate
              </h3>
              <div class="space-y-4">
                <div>
                  <div class="text-sm text-gray-600 mb-1">Average Annual Savings</div>
                  <div class="text-2xl font-bold text-green-700">$489</div>
                </div>
                <a href="/tools/insurance-calculator" class="text-blue-700 hover:text-blue-900 font-medium text-sm flex items-center gap-2">
                  Try our savings calculator
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
          
          {/* Decorative Elements */}
          <div class="absolute -top-6 -right-6 w-24 h-24 bg-blue-100 rounded-full opacity-50"></div>
          <div class="absolute -bottom-4 -left-4 w-16 h-16 bg-cyan-100 rounded-full opacity-50"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- üí∞ MONEY SAVING TIPS SECTION -->
  <section id="money-saving-tips" class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600">
            Proven Ways to Save Money
          </span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Implement these strategies and start saving on your auto insurance today
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
        {[
          {
            icon: "üìã",
            title: "Bundle Policies",
            savings: "Save 15-25%",
            description: "Combine auto with home/renters insurance",
            color: "from-blue-100 to-blue-50"
          },
          {
            icon: "‚≠ê",
            title: "Safe Driver Discounts",
            savings: "Save 10-30%",
            description: "Maintain clean driving record",
            color: "from-green-100 to-green-50"
          },
          {
            icon: "üéì",
            title: "Good Student Discount",
            savings: "Save up to 20%",
            description: "For students with B average or better",
            color: "from-purple-100 to-purple-50"
          },
          {
            icon: "üõ°Ô∏è",
            title: "Increase Deductible",
            savings: "Save 15-40%",
            description: "Higher deductible = lower premium",
            color: "from-amber-100 to-amber-50"
          }
        ].map((tip, index) => (
          <div class={`bg-gradient-to-br ${tip.color} border border-gray-200 rounded-2xl p-6 hover:shadow-lg hover:-translate-y-1 transition-all duration-300`}>
            <div class="flex items-start justify-between mb-4">
              <div class="text-3xl">{tip.icon}</div>
              <div class="px-3 py-1 bg-white/80 rounded-full">
                <span class="text-green-700 font-bold text-sm">{tip.savings}</span>
              </div>
            </div>
            
            <h3 class="text-lg font-bold text-gray-900 mb-3">{tip.title}</h3>
            <p class="text-gray-600 text-sm mb-6">{tip.description}</p>
            
            <a href={`/saving-tips/${tip.title.toLowerCase().replace(/\s+/g, '-')}`} 
               class="text-blue-700 hover:text-blue-900 font-medium text-sm flex items-center gap-2">
              Learn how to qualify
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
              </svg>
            </a>
          </div>
        ))}
      </div>
      
      {/* More Tips Link */}
      <div class="text-center mt-12">
        <a href="/saving-tips" 
           class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-700 text-white font-bold rounded-xl hover:shadow-xl hover:shadow-green-500/30 transition-all">
          <span>üí∞</span>
          SEE ALL 27 MONEY-SAVING TIPS
        </a>
      </div>
    </div>
  </section>

  <!-- üèÜ FEATURED GUIDES SECTION -->
  <section class="py-20 bg-gradient-to-b from-blue-50 to-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
            Featured Insurance Guides
          </span>
        </h2>
        <p class="text-xl text-gray-600">
          Expert advice to help you make informed decisions
        </p>
      </div>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
        {/* Featured Post */}
        <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-blue-100">
          <div class="relative h-64 md:h-80 bg-gradient-to-r from-blue-500 to-cyan-500">
            {featuredPost?.data?.image ? (
              <img
                src={featuredPost.data.image}
                alt={featuredPost.data.title}
                class="w-full h-full object-cover"
                loading="eager"
              />
            ) : (
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-white text-6xl">üöó</div>
              </div>
            )}
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
            <div class="absolute top-6 left-6">
              <span class="px-4 py-2 bg-white/90 backdrop-blur-sm text-blue-900 font-bold rounded-full text-sm">
                üèÜ FEATURED GUIDE
              </span>
            </div>
          </div>
          
          <div class="p-8">
            <div class="flex items-center gap-3 mb-4">
              <span class="px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full">
                {featuredPost?.data?.category ? featuredPost.data.category.replace('-', ' ').toUpperCase() : 'GUIDE'}
              </span>
              <span class="text-gray-500 text-sm">‚è±Ô∏è {featuredPost?.data?.readTime || 10} min read</span>
            </div>
            
            <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-4">
              {featuredPost?.data?.title || "How to Choose the Best Auto Insurance"}
            </h2>
            
            <p class="text-gray-600 mb-6">
              {featuredPost?.data?.description || "Comprehensive guide to selecting the right coverage for your needs and budget."}
            </p>
            
            {featuredPost ? (
              <a href={`/blog/${featuredPost.slug}`} 
                 class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-800 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-blue-500/30 transition-all">
                READ FULL GUIDE
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
              </a>
            ) : (
              <div class="text-center py-8">
                <p class="text-gray-500">No featured guide available yet.</p>
              </div>
            )}
          </div>
        </div>
        
        {/* Quick Start Guides */}
        <div>
          <h3 class="text-2xl font-bold text-gray-900 mb-8">Quick Start Guides</h3>
          <div class="space-y-6">
            {quickWins && quickWins.length > 0 ? quickWins.slice(0, 3).map((post, index) => (
              <a href={`/blog/${post.slug}`} 
                 class="group block bg-white rounded-2xl p-6 border border-gray-200 hover:border-blue-300 hover:shadow-lg transition-all hover:-translate-y-1">
                <div class="flex items-start gap-4">
                  <div class="text-2xl text-blue-600">{['üìã', 'üí∞', 'üõ°Ô∏è'][index] || 'üìù'}</div>
                  <div class="flex-1">
                    <div class="flex items-center justify-between mb-2">
                      <h4 class="text-lg font-bold text-gray-900 group-hover:text-blue-700 transition-colors">
                        {post.data.title}
                      </h4>
                      <span class="text-gray-400 text-sm">{post.data.readTime} min</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-3">
                      {post.data.description || 'Quick guide to get started...'}
                    </p>
                    <div class="flex items-center justify-between">
                      <span class="text-blue-700 text-sm font-medium flex items-center gap-2">
                        Read guide
                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                        </svg>
                      </span>
                      <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">
                        {post.data.category ? post.data.category.replace('-', ' ') : 'guide'}
                      </span>
                    </div>
                  </div>
                </div>
              </a>
            )) : (
              <div class="text-center py-12">
                <div class="text-4xl mb-4 text-gray-300">üöó</div>
                <h3 class="text-xl font-bold text-gray-500">No guides yet</h3>
                <p class="text-gray-400 mt-2">Check back soon for our first insurance guides!</p>
              </div>
            )}
          </div>
          
          <div class="mt-8 text-center">
            <a href="/blog" 
               class="inline-flex items-center gap-2 text-blue-700 hover:text-blue-900 font-medium">
              View all insurance guides
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- üó∫Ô∏è STATE-SPECIFIC GUIDES -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
            State-Specific Insurance Requirements
          </span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Auto insurance requirements vary by state. Find your state's minimum coverage.
        </p>
      </div>
      
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 max-w-4xl mx-auto mb-12">
        {['California', 'Texas', 'Florida', 'New York', 'Pennsylvania', 'Illinois', 'Ohio', 'Georgia', 'North Carolina', 'Michigan'].map((state) => (
          <a href={`/states/${state.toLowerCase().replace(/\s+/g, '-')}`} 
             class="group text-center p-4 bg-gray-50 hover:bg-blue-50 rounded-xl border border-gray-200 hover:border-blue-300 transition-all">
            <div class="text-2xl mb-2">üó∫Ô∏è</div>
            <div class="font-semibold text-gray-900 group-hover:text-blue-700 transition-colors">
              {state}
            </div>
            <div class="text-xs text-gray-500 mt-1">View requirements</div>
          </a>
        ))}
      </div>
      
      <div class="text-center">
        <a href="/states" 
           class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-700 text-white font-bold rounded-xl hover:shadow-xl hover:shadow-purple-500/30 transition-all">
          <span>üó∫Ô∏è</span>
          VIEW ALL 50 STATES
        </a>
      </div>
    </div>
  </section>

  <!-- üè¢ INSURANCE COMPANY REVIEWS -->
  <section class="py-20 bg-gradient-to-b from-gray-50 to-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-amber-600 to-orange-600">
            Insurance Company Reviews
          </span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Unbiased reviews of top auto insurance companies
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
        {[
          {
            name: "Geico",
            rating: 4.5,
            pros: ["Low rates", "Easy online", "Good discounts"],
            icon: "ü¶é",
            color: "from-blue-100 to-cyan-100"
          },
          {
            name: "State Farm",
            rating: 4.3,
            pros: ["Great agents", "Bundle deals", "Claims process"],
            icon: "üè¢",
            color: "from-red-100 to-pink-100"
          },
          {
            name: "Progressive",
            rating: 4.4,
            pros: ["Name your price", "Snapshot tool", "Variety of coverage"],
            icon: "üìä",
            color: "from-blue-100 to-indigo-100"
          },
          {
            name: "Allstate",
            rating: 4.2,
            pros: ["Accident forgiveness", "Safe driving bonus", "Local agents"],
            icon: "üëç",
            color: "from-blue-100 to-purple-100"
          }
        ].map((company) => (
          <div class={`bg-gradient-to-br ${company.color} border border-gray-200 rounded-2xl p-6 hover:shadow-lg hover:-translate-y-1 transition-all duration-300`}>
            <div class="flex items-center justify-between mb-6">
              <div class="text-3xl">{company.icon}</div>
              <div class="flex items-center gap-1">
                <span class="text-amber-600 font-bold">{company.rating}</span>
                <span class="text-gray-400">/5</span>
              </div>
            </div>
            
            <h3 class="text-xl font-bold text-gray-900 mb-4">{company.name}</h3>
            
            <div class="space-y-2 mb-6">
              {company.pros.map(pro => (
                <div class="flex items-center gap-2">
                  <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                  <span class="text-sm text-gray-700">{pro}</span>
                </div>
              ))}
            </div>
            
            <a href={`/companies/${company.name.toLowerCase()}`} 
               class="text-blue-700 hover:text-blue-900 font-medium text-sm flex items-center gap-2">
              Read full review
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
              </svg>
            </a>
          </div>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a href="/companies" 
           class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-amber-600 to-orange-700 text-white font-bold rounded-xl hover:shadow-xl hover:shadow-amber-500/30 transition-all">
          <span>üè¢</span>
          COMPARE ALL INSURANCE COMPANIES
        </a>
      </div>
    </div>
  </section>

  <!-- üìö LEARNING CENTER / CATEGORIES -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600">
            Complete Learning Center
          </span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Everything you need to know about auto insurance in one place
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
        {Object.entries(CATEGORY_HIERARCHY).slice(0, 6).map(([category, data]) => (
          <a href={`/categories/${category}`} 
             class="group bg-white border border-gray-200 rounded-2xl p-6 hover:border-blue-300 hover:shadow-xl transition-all hover:-translate-y-2">
            <div class="flex items-start gap-4 mb-6">
              <div class="text-3xl text-blue-600">{data.icon || 'üìö'}</div>
              <div>
                <h3 class="text-xl font-bold text-gray-900 group-hover:text-blue-700 transition-colors mb-2">
                  {data.name}
                </h3>
                <div class="flex items-center gap-2">
                  <span class="text-sm text-gray-500">{categoryPostCounts[category] || 0} guides</span>
                  <span class="text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full font-medium">
                    FREE
                  </span>
                </div>
              </div>
            </div>
            
            <p class="text-gray-600 text-sm mb-6">
              {data.description}
            </p>
            
            <div class="flex items-center justify-between">
              <span class="text-blue-700 font-medium text-sm flex items-center gap-2">
                Explore category
                <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
              </span>
              
              {categoryPosts[category] && categoryPosts[category].length > 0 ? (
                <div class="flex -space-x-2">
                  {categoryPosts[category].slice(0, 3).map((post, idx) => (
                    <div class="w-8 h-8 bg-blue-100 rounded-full border-2 border-white flex items-center justify-center text-xs text-blue-700 font-bold">
                      {idx + 1}
                    </div>
                  ))}
                </div>
              ) : null}
            </div>
          </a>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a href="/categories" 
           class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-emerald-600 to-teal-700 text-white font-bold rounded-xl hover:shadow-xl hover:shadow-emerald-500/30 transition-all">
          <span>üìö</span>
          BROWSE ALL INSURANCE TOPICS
        </a>
      </div>
    </div>
  </section>

  <!-- üéØ FINAL CTA & TRUST SIGNALS -->
  <section class="py-20 bg-gradient-to-r from-blue-900 to-blue-800">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center text-white">
        <div class="mb-12">
          <h2 class="text-3xl md:text-4xl font-bold mb-6">
            Ready to Save on Auto Insurance?
          </h2>
          <p class="text-xl text-blue-100 mb-8">
            Get started with our free tools and guides. No signup required.
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
          <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
            <div class="text-3xl mb-4">üìù</div>
            <h3 class="text-lg font-bold mb-3">Free Guides</h3>
            <p class="text-blue-100 text-sm">Comprehensive insurance education</p>
          </div>
          <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
            <div class="text-3xl mb-4">üí∞</div>
            <h3 class="text-lg font-bold mb-3">Savings Tools</h3>
            <p class="text-blue-100 text-sm">Calculators and comparison tools</p>
          </div>
          <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
            <div class="text-3xl mb-4">üèÜ</div>
            <h3 class="text-lg font-bold mb-3">Unbiased Reviews</h3>
            <p class="text-blue-100 text-sm">No commission, just facts</p>
          </div>
        </div>
        
        <div class="space-y-6">
          <a href="/tools" 
             class="inline-block w-full max-w-md mx-auto py-5 bg-white text-blue-900 font-bold rounded-xl hover:bg-blue-50 hover:shadow-2xl transition-all text-lg">
            üöó START SAVING NOW
          </a>
          
          <div class="text-blue-200 text-sm">
            <p>‚úÖ No credit card required ‚Ä¢ ‚úÖ No signup needed ‚Ä¢ ‚úÖ 100% free access</p>
          </div>
          
          {/* Trust Badges */}
          <div class="flex flex-wrap justify-center items-center gap-6 pt-8 border-t border-white/20">
            <div class="text-sm text-blue-200">Trusted by 15,000+ monthly visitors</div>
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm text-white">SSL Secured</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DISCLAIMER -->
  <div class="bg-gray-50 py-8 border-t border-gray-200">
    <div class="container mx-auto px-4">
      <p class="text-center text-gray-600 text-sm max-w-3xl mx-auto">
        üöó <strong>Important Disclaimer:</strong> AutoInsureGuides provides educational content only. We are not insurance agents or brokers. 
        Always verify specific requirements with your state's insurance department and consult licensed professionals for personalized advice. 
        Rates and availability vary by location and individual circumstances.
      </p>
    </div>
  </div>

  <!-- üéØ GOOGLE ADSENSE PLACEMENT -->
  <div class="bg-gray-100 py-6">
    <div class="container mx-auto px-4">
      <!-- AdSense Slot - Will be filled by AdSense -->
      <div class="max-w-4xl mx-auto text-center">
        <div class="bg-white p-4 rounded-lg border border-gray-300">
          <div class="text-sm text-gray-500 mb-2">Advertisement</div>
          <!-- AdSense code will be injected here -->
          <ins class="adsbygoogle"
               style="display:block; text-align:center;"
               data-ad-layout="in-article"
               data-ad-format="fluid"
               data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
               data-ad-slot="XXXXXXXXXX">
          </ins>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Smooth transitions */
    * {
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Gradient animations */
    @keyframes gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .animate-gradient {
      background-size: 200% 200%;
      animation: gradient 4s ease infinite;
    }
    
    /* Line clamp utilities */
    .line-clamp-1 {
      overflow: hidden;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 1;
    }
    
    .line-clamp-2 {
      overflow: hidden;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
    }
    
    .line-clamp-3 {
      overflow: hidden;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 3;
    }
  </style>
</Base>