---
import { getCollection } from "astro:content";
const VALID_PILLARS = ["auto-insurance", "accidents", "traffic-laws"];
export async function getStaticPaths() {
  const paths = [];
  for (const pillar of VALID_PILLARS) {
    try {
      const articles = await getCollection(pillar);
      for (const article of articles) {
        paths.push({
          params: { pillar, subcategory: article.data.subcategory, slug: article.slug },
          props: { article }
        });
      }
    } catch (error) {
      console.log(`No articles in ${pillar} collection yet`);
    }
  }
  return paths;
}
const { article } = Astro.props;
const { pillar } = Astro.params;
---
<html>
  <head>
    <title>{article.data.title}</title>
  </head>
  <body>
    <h1>{article.data.title}</h1>
    <p>Pillar: {pillar}</p>
    <p>Subcategory: {article.data.subcategory}</p>
    <div>{article.body}</div>
  </body>
</html>